PKG_LIBS = -Lgmsh/build -lgmsh

$(SHLIB): gmsh_lib

gmsh_lib:
	(\
		cd gmsh; \
		mkdir build; \
		cd build; \
		CC="$(CC)" \
		CXX="$(CXX)" \
		CFLAGS="$(CFLAGS)" \
		CXXFLAGS="$(CXXFLAGS)" \
		LDFLAGS="$(LDFLAGS)" \
		cmake \
			-D ENABLE_BUILD_LIB:bool=ON \
			-D CMAKE_BUILD_TYPE=Release \
			-D CMAKE_SHARED_LIBS:bool=OFF \
			-D CMAKE_POSITION_INDEPENDENT_CODE:bool=ON \
			.. \
		; \
		cmake --build .; \
	)
